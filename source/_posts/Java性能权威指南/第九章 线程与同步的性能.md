---
title: 九、线程与同步的性能
date: 2017-01-18 22:01:00
updated: 2017-01-18 22:01:00
comments: true
categories: 
- 读书笔记
- Java 性能权威指南
permalink: java_performance_the_definitive_guide/9.html  
---

如何挖掘出 Java 线程和同步设施的最大性能

---

# 1 线程池与 ThreadPollExecutor

Java EE 应用服务器就是围绕用一个或多个线程池处理请求这一概念构建的：对服务器上 Servlet 的每个调用都是通过池中的线程处理的（也有可能不同）。类似的，其它应用可以使用 Java 的 ThreadPoolExecutor 并行执行任务。  
  
所有线程池的工作方法本质是一样的：有一个队列，任务被提交到这个队列中。（可以有不止一个队列，概念是一样的。）一定数量的线程会从该队列中取任务，然后执行。任务的结果可以发回客户端（比如应用服务器的情况下），或保存到数据库中。但是在执行完任务后，这个线程会返回任务队列，检索另一个任务并执行（如果没有更多任务要执行，该线程会等待下一个任务）。  
  
线程池有最小线程数和最大线程数。池中会有最小数目的线程随时待命，等待任务指派给它们。因为创建线程的成本非常高昂，这样可以提高任务提交时的整体性能。另一方面，线程需要一些系统次元，包括栈所需的原生内存，如果空闲线程太多，就会消耗本来可以分配给其它金恒的资源。  
>ThreadPoolExecutor 和相关的类将最小线程数称为核心池大小。

# 2 ForkJoinPool

# 3 线程同步

# 4 JVM 线程调优

# 5 监控线程与锁

# 6 小结